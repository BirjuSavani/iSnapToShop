!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("React"),require("sharedUtilsLibrary")):"function"==typeof define&&define.amd?define("extension",["React","sharedUtilsLibrary"],e):"object"==typeof exports?exports.extension=e(require("React"),require("sharedUtilsLibrary")):n.extension=e(n.React,n.sharedUtilsLibrary)}("undefined"!=typeof self?self:this,(n,e)=>(()=>{var a={173:n=>{"use strict";n.exports=e},556:(n,e,a)=>{n.exports=a(694)()},694:(n,e,a)=>{"use strict";var i=a(925);function r(){}function t(){}t.resetWarningCache=r,n.exports=function(){function n(n,e,a,r,t,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return n}n.isRequired=n;var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:t,resetWarningCache:r};return a.PropTypes=a,a}},883:e=>{"use strict";e.exports=n},925:n=>{"use strict";n.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},i={};function r(n){var e=i[n];if(void 0!==e)return e.exports;var t=i[n]={exports:{}};return a[n](t,t.exports,r),t.exports}r.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return r.d(e,{a:e}),e},r.d=(n,e)=>{for(var a in e)r.o(e,a)&&!r.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:e[a]})},r.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),r.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var t={};return(()=>{"use strict";r.r(t),r.d(t,{default:()=>x});var n={};r.r(n),r.d(n,{Component:()=>y,settings:()=>h});var e=r(173),a=r(556),i=r.n(a),o=r(883),s=r.n(o);const c="\n/* \n============================================\nComponent.css for iSnapToShop\nGeneric, Theme-able Stylesheet\n============================================\n*/\n\n/* \n--------------------------------------------\n1. THEME VARIABLES \n--------------------------------------------\n*/\n:root {\n/* Text Colors */\n--isnap-color-text-primary: #000000; /* Black */\n--isnap-color-text-secondary: #4b5563; /* Medium Gray */\n--isnap-color-text-accent: #111111; /* Dark Gray/Black */\n--isnap-color-text-on-accent: #ffffff; /* White on dark */\n--isnap-color-text-on-success: #ffffff; /* Keep white for consistency */\n--isnap-color-text-error: #dc2626; /* Optional: Red for error */\n\n/* Background Colors */\n--isnap-color-bg-primary: #ffffff; /* White */\n--isnap-color-bg-secondary: #f5f5f5; /* Light Gray */\n--isnap-color-bg-overlay: rgba(0, 0, 0, 0.4);/* Soft black overlay */\n\n/* Accent & Button Colors */\n--isnap-color-accent-primary: #000000; /* Black */\n--isnap-color-accent-primary-hover: #333333; /* Dark Gray on hover */\n--isnap-color-accent-secondary: #e5e7eb; /* Very light gray */\n--isnap-color-accent-secondary-hover: #d1d5db; /* Hover shade */\n\n/* Status Colors (Keep minimal red/green for clarity, or remove if strict grayscale is needed) */\n--isnap-color-success: #16a34a; /* Optional: Green */\n--isnap-color-success-hover: #15803d;\n--isnap-color-border-error: #ef4444;\n\n/* Border Colors */\n--isnap-color-border: #d1d5db; /* Light Gray */\n--isnap-color-border-focus: #4b5563; /* Subtle dark gray for focus */\n--isnap-color-border-success: #22c55e; /* Optional */\n\n /* Sizing & Spacing */\n --isnap-border-radius-sm: 4px;\n --isnap-border-radius-md: 8px;\n --isnap-border-radius-lg: 16px;\n --isnap-spacing-unit: 8px;\n --isnap-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);\n --isnap-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);\n --isnap-shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);\n\n /* Typography */\n --isnap-font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n \n /* Drawer Overlay Styles */\n --isnap-drawer-overlay-color: rgba(249, 250, 251, 0.85);\n --isnap-drawer-overlay-noise-opacity: 0.04;\n --isnap-noise-bg: url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E\");\n}\n\n/* \n--------------------------------------------\n2. BASE & LAYOUT\n--------------------------------------------\n*/\n.isnap-container {\n font-family: var(--isnap-font-family);\n background-color: var(--isnap-color-bg-secondary);\n color: var(--isnap-color-text-primary);\n padding: calc(var(--isnap-spacing-unit) * 4) calc(var(--isnap-spacing-unit) * 2);\n margin: 0 auto;\n}\n\n.isnap-title {\n font-size: clamp(1.75rem, 5vw, 2.5rem);\n font-weight: 800;\n text-align: center;\n color: var(--isnap-color-text-primary);\n margin-bottom: calc(var(--isnap-spacing-unit) * 4);\n}\n\n.isnap-upload-section {\n text-align: center;\n margin-bottom: calc(var(--isnap-spacing-unit) * 4);\n}\n\n.isnap-upload-caption {\n margin-top: var(--isnap-spacing-unit);\n color: var(--isnap-color-text-secondary);\n font-size: 0.9rem;\n max-width: 578px;\n margin-left: auto;\n margin-right: auto;\n}\n.isnap-upload-caption strong {\n color: var(--isnap-color-text-primary);\n}\n\n\n/* \n--------------------------------------------\n3. BUTTONS & INPUTS\n--------------------------------------------\n*/\n.isnap-btn {\n display: inline-flex;\n align-items: center;\n justify-content: center;\n gap: var(--isnap-spacing-unit);\n padding: calc(var(--isnap-spacing-unit) * 1.25) calc(var(--isnap-spacing-unit) * 3);\n font-family: inherit;\n font-size: 1rem;\n font-weight: 600;\n border-radius: var(--isnap-border-radius-md);\n border: 1px solid transparent;\n cursor: pointer;\n transition: background-color 0.2s ease, border-color 0.2s ease, transform 0.1s ease;\n user-select: none;\n}\n\n.isnap-btn:active {\n transform: translateY(1px);\n}\n\n.isnap-btn:disabled {\n cursor: not-allowed;\n opacity: 0.6;\n}\n\n.isnap-btn-primary {\n background-color: var(--isnap-color-accent-primary);\n color: var(--isnap-color-text-on-accent);\n}\n.isnap-btn-primary:not(:disabled):hover {\n background-color: var(--isnap-color-accent-primary-hover);\n}\n\n.isnap-btn-secondary {\n background-color: var(--isnap-color-accent-secondary);\n color: var(--isnap-color-text-primary);\n border-color: var(--isnap-color-border);\n}\n.isnap-btn-secondary:not(:disabled):hover {\n background-color: var(--isnap-color-accent-secondary-hover);\n}\n\n.isnap-btn-success {\n background-color: var(--isnap-color-success);\n color: var(--isnap-color-text-on-success);\n}\n.isnap-btn-success:not(:disabled):hover {\n background-color: var(--isnap-color-success-hover);\n}\n\n.isnap-btn--full-width {\n width: 100%;\n}\n.isnap-btn--small {\n padding: calc(var(--isnap-spacing-unit) * 0.75) calc(var(--isnap-spacing-unit) * 1.5);\n font-size: 0.8rem;\n}\n\n.isnap-upload-btn {\n padding: calc(var(--isnap-spacing-unit) * 1.5) calc(var(--isnap-spacing-unit) * 4);\n font-size: 1.1rem;\n}\n\n.isnap-input {\n width: 100%;\n padding: calc(var(--isnap-spacing-unit) * 1.25) calc(var(--isnap-spacing-unit) * 1.5);\n font-size: 1rem;\n border: 1px solid var(--isnap-color-border);\n border-radius: var(--isnap-border-radius-md);\n background-color: var(--isnap-color-bg-primary);\n color: var(--isnap-color-text-primary);\n box-sizing: border-box;\n transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n\n.isnap-input:focus {\n outline: none;\n border-color: var(--isnap-color-border-focus);\n box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);\n}\n\n/* \n--------------------------------------------\n4. MODALS & POPUPS\n--------------------------------------------\n*/\n.isnap-modal-overlay,\n.isnap-popup-overlay {\n position: fixed;\n inset: 0;\n z-index: 50;\n  border: none;\n  background: none;\n  padding: 0;\n  font-family: inherit; \n  text-align: inherit; \n  cursor: default;    \n background-color: var(--isnap-color-bg-overlay);\n display: flex;\n align-items: center;\n justify-content: center;\n padding: var(--isnap-spacing-unit);\n animation: isnap-fade-in 0.3s ease;\n}\n\n.isnap-modal-content,\n.isnap-popup-content {\n background-color: var(--isnap-color-bg-primary);\n border-radius: var(--isnap-border-radius-lg);\n box-shadow: var(--isnap-shadow-xl);\n width: 100%;\n max-width: 500px;\n display: flex;\n flex-direction: column;\n max-height: 90vh;\n animation: isnap-slide-up 0.4s ease;\n}\n\n.isnap-popup-content {\n max-width: 900px;\n}\n\n.isnap-modal-header,\n.isnap-popup-header {\n display: flex;\n justify-content: space-between;\n align-items: center;\n padding: calc(var(--isnap-spacing-unit) * 2) calc(var(--isnap-spacing-unit) * 3);\n border-bottom: 1px solid var(--isnap-color-border);\n flex-shrink: 0;\n}\n\n.isnap-modal-title,\n.isnap-popup-title {\n font-size: 1.25rem;\n font-weight: 700;\n margin: 0;\n}\n\n.isnap-modal-close-btn,\n.isnap-popup-close-btn {\n background: none;\n border: none;\n font-size: 1.75rem;\n font-weight: 300;\n line-height: 1;\n color: var(--isnap-color-text-secondary);\n cursor: pointer;\n padding: 0 var(--isnap-spacing-unit);\n transition: color 0.2s ease;\n cursor: pointer;\n}\n.isnap-modal-close-btn:hover,\n.isnap-popup-close-btn:hover {\n color: var(--isnap-color-text-primary);\n}\n\n.isnap-modal-body,\n.isnap-popup-body {\n padding: calc(var(--isnap-spacing-unit) * 3);\n overflow-y: auto;\n}\n.isnap-modal-body--centered {\n text-align: center;\n}\n\n.isnap-label {\n display: block;\n font-weight: 600;\n font-size: 0.9rem;\n margin-bottom: var(--isnap-spacing-unit);\n}\n\n.isnap-divider {\n text-align: center;\n margin: calc(var(--isnap-spacing-unit) * 3) 0;\n color: var(--isnap-color-text-secondary);\n position: relative;\n}\n.isnap-divider::before {\n content: '';\n position: absolute;\n top: 50%;\n left: 0;\n right: 0;\n height: 1px;\n background-color: var(--isnap-color-border);\n}\n.isnap-divider span {\n background-color: var(--isnap-color-bg-primary);\n padding: 0 var(--isnap-spacing-unit);\n position: relative;\n z-index: 1;\n}\n\n.isnap-modal-actions {\n display: flex;\n flex-direction: column;\n gap: var(--isnap-spacing-unit);\n margin-top: calc(var(--isnap-spacing-unit) * 2);\n}\n\n.isnap-modal-choices {\n display: flex;\n gap: var(--isnap-spacing-unit);\n margin-bottom: calc(var(--isnap-spacing-unit) * 2);\n}\n.isnap-choice-btn {\n flex: 1;\n display: flex;\n flex-direction: column;\n align-items: center;\n justify-content: center;\n gap: var(--isnap-spacing-unit);\n padding: calc(var(--isnap-spacing-unit) * 2);\n border: 1px solid var(--isnap-color-border);\n border-radius: var(--isnap-border-radius-md);\n background-color: var(--isnap-color-bg-primary);\n cursor: pointer;\n transition: background-color 0.2s ease, border-color 0.2s ease;\n text-align: center;\n}\n.isnap-choice-btn:hover {\n background-color: var(--isnap-color-bg-secondary);\n border-color: var(--isnap-color-accent-primary);\n}\n.isnap-choice-btn svg {\n width: 28px;\n height: 28px;\n color: var(--isnap-color-accent-primary);\n}\n.isnap-choice-btn span {\n font-weight: 600;\n font-size: 0.9rem;\n color: var(--isnap-color-text-primary);\n}\n\n\n.isnap-preview-actions {\n display: flex;\n justify-content: center;\n gap: var(--isnap-spacing-unit);\n margin-top: calc(var(--isnap-spacing-unit) * 2);\n}\n.isnap-image-preview {\n max-width: 100%;\n max-height: 40vh;\n border-radius: var(--isnap-border-radius-md);\n object-fit: contain;\n}\n\n/* \n--------------------------------------------\n5. PRODUCT GRID & CARDS\n--------------------------------------------\n*/\n.isnap-grid {\n display: grid;\n grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\n gap: calc(var(--isnap-spacing-unit) * 2);\n}\n\n.isnap-card,\n.isnap-mobile-card {\n background-color: var(--isnap-color-bg-primary);\n border-radius: var(--isnap-border-radius-md);\n box-shadow: var(--isnap-shadow-md);\n transition: transform 0.3s ease, box-shadow 0.3s ease;\n overflow: hidden;\n position: relative;\n}\n.isnap-card:hover {\n transform: translateY(-4px);\n box-shadow: var(--isnap-shadow-lg);\n}\n\n.isnap-card__inner, .isnap-mobile-card__inner {\n pointer-events: auto;\n}\n.isnap-card--drawer-open .isnap-card__inner,\n.isnap-mobile-card--drawer-open .isnap-mobile-card__inner {\n pointer-events: none;\n}\n\n.isnap-card__image {\n width: 100%;\n height: 200px;\n object-fit: cover;\n background-color: var(--isnap-color-bg-secondary);\n}\n\n.isnap-card__content {\n padding: calc(var(--isnap-spacing-unit) * 1.5);\n}\n\n.isnap-card__title {\n font-size: 1rem;\n font-weight: 600;\n margin: 0 0 calc(var(--isnap-spacing-unit) * 0.5) 0;\n display: -webkit-box;\n -webkit-line-clamp: 2;\n -webkit-box-orient: vertical;\n overflow: hidden;\n}\n\n.isnap-card__category {\n font-size: 0.8rem;\n color: var(--isnap-color-text-secondary);\n margin: 0 0 var(--isnap-spacing-unit) 0;\n text-transform: capitalize;\n}\n\n.isnap-card__price {\n font-size: 1.1rem;\n font-weight: 700;\n color: var(--isnap-color-text-accent);\n}\n.isnap-card__price--original {\n font-size: 0.9rem;\n font-weight: 400;\n color: var(--isnap-color-text-secondary);\n text-decoration: line-through;\n margin-left: var(--isnap-spacing-unit);\n}\n\n.isnap-card__actions {\n display: flex;\n gap: var(--isnap-spacing-unit);\n margin-top: calc(var(--isnap-spacing-unit) * 1.5);\n}\n.isnap-card__actions .isnap-btn svg {\n width: 14px;\n height: 14px;\n}\n\n/* Mobile Card Layout */\n.isnap-mobile-products-container {\n display: flex;\n flex-direction: column;\n gap: calc(var(--isnap-spacing-unit) * 2);\n}\n.isnap-mobile-card__inner {\n display: flex;\n gap: var(--isnap-spacing-unit);\n padding: var(--isnap-spacing-unit);\n}\n.isnap-mobile-card__image {\n width: 100px;\n height: 100px;\n object-fit: cover;\n border-radius: var(--isnap-border-radius-sm);\n flex-shrink: 0;\n}\n.isnap-mobile-card__content {\n flex-grow: 1;\n display: flex;\n flex-direction: column;\n}\n.isnap-mobile-card__title {\n font-size: 0.9rem;\n font-weight: 600;\n margin: 0;\n}\n\n/* \n/*\n--------------------------------------------\n6. CARD DRAWER (ADD TO CART) - CORRECTED\n--------------------------------------------\n.isnap-card-drawer {\n    position: fixed; /* Use 'fixed' to ensure it covers the entire viewport */\n    inset: 0;\n    z-index: 10;\n    \n    background-color: var(--isnap-drawer-overlay-color);\n    backdrop-filter: blur(6px);\n    -webkit-backdrop-filter: blur(6px);\n    \n    /* Control visibility with opacity and pointer-events */\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity 0.5s ease; /* Transition for the fade effect */\n}\n\n.isnap-card-drawer--active {\n    opacity: 1;\n    pointer-events: auto; /* Allow clicks on the overlay (to close it, for example) */\n}\n\n.isnap-card-drawer::before {\n    content: '';\n    position: absolute;\n    inset: 0;\n    z-index: 0;\n    background-image: var(--isnap-noise-bg);\n    opacity: var(--isnap-drawer-overlay-noise-opacity);\n    pointer-events: none;\n}\n\n.isnap-card-drawer__content {\n    /* --- Positioning and Sizing --- */\n    position: absolute;\n    top: 0;\n    right: 0;\n    height: 100%;\n    width: 100%;\n    max-width: 420px; /* Set a max-width for the drawer panel */\n    background-color: var(--isnap-color-bg-primary, white); /* Give it a solid background */\n    box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1); /* Add a shadow for depth */\n    transform: translateX(100%) translateZ(0); /* Start off-screen */\n    transition: transform 0.7s cubic-bezier(0.16, 1, 0.3, 1);\n    will-change: transform;\n    \n    display: flex;\n    flex-direction: column; /* Use flexbox for robust header/content/footer layout */\n    padding: calc(var(--isnap-spacing-unit) * 2);\n    z-index: 1;\n    overflow-y: auto; /* If content overflows, this will scroll */\n    opacity:0.95\n}\n\n.isnap-card-drawer--active .isnap-card-drawer__content {\n    transform: translateX(0%) translateZ(0); /* Slide to its final position */\n}\n\n.isnap-card-drawer__header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid var(--isnap-color-border);\n    padding-bottom: var(--isnap-spacing-unit);\n    margin-bottom: calc(var(--isnap-spacing-unit) * 2);\n    flex-shrink: 0; /* Prevents header from shrinking if content is large */\n}\n\n.isnap-card-drawer__title {\n    font-size: 1rem;\n    font-weight: 600;\n    margin: 0;\n}\n.isnap-card-drawer__close-btn {\n    background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--isnap-color-text-secondary);\n}\n\n.isnap-card-drawer__section {\n    border: 0;\n    padding: 0;\n    margin-bottom: calc(var(--isnap-spacing-unit) * 2);\n}\n\n.isnap-size-selector {\n    display: flex;\n    flex-wrap: wrap;\n    gap: var(--isnap-spacing-unit);\n}\n\n.isnap-size-btn {\n    padding: var(--isnap-spacing-unit);\n    min-width: 40px;\n    text-align: center;\n    border: 1px solid var(--isnap-color-border);\n    background-color: var(--isnap-color-bg-primary);\n    border-radius: var(--isnap-border-radius-sm);\n    cursor: pointer;\n}\n\n.isnap-size-btn--selected {\n    border-color: var(--isnap-color-accent-primary);\n    background-color: var(--isnap-color-accent-primary);\n    color: var(--isnap-color-text-on-accent);\n}\n\n/* \n--------------------------------------------\n7. LOADING & UTILITIES\n--------------------------------------------\n*/\n.isnap-spinner {\n display: inline-block;\n width: 18px;\n height: 18px;\n border: 2px solid currentColor;\n border-bottom-color: transparent;\n border-radius: 50%;\n animation: isnap-spin 1s linear infinite;\n}\n\n.isnap-ai-processing-overlay {\n position: absolute;\n inset: 0;\n background-color: var(--isnap-color-bg-overlay);\n display: flex;\n flex-direction: column;\n align-items: center;\n justify-content: center;\n color: var(--isnap-color-text-on-accent);\n border-radius: var(--isnap-border-radius-md);\n text-align: center;\n}\n.isnap-ai-icon svg {\n animation: isnap-pulse 2s infinite ease-in-out;\n}\n.isnap-ai-processing-text {\n font-weight: 600;\n margin-top: var(--isnap-spacing-unit);\n}\n.isnap-ai-subtext {\n font-size: 0.9rem;\n opacity: 0.9;\n}\n\n.isnap-popup-image-section {\n padding: var(--isnap-spacing-unit);\n background-color: var(--isnap-color-bg-secondary);\n border-radius: var(--isnap-border-radius-md);\n margin-bottom: calc(var(--isnap-spacing-unit) * 2);\n}\n.isnap-popup-section-title {\n font-size: 1rem;\n font-weight: 600;\n margin: 0 0 var(--isnap-spacing-unit) 0;\n text-align: center;\n}\n.isnap-popup-selected-image-wrapper {\n position: relative;\n max-width: 300px;\n margin: 0 auto;\n}\n.isnap-popup-selected-image {\n width: 100%;\n max-height: 250px;\n object-fit: contain;\n border-radius: var(--isnap-border-radius-md);\n}\n.isnap-loading-full,\n.isnap-no-results-text {\n text-align: center;\n padding: calc(var(--isnap-spacing-unit) * 5) 0;\n color: var(--isnap-color-text-secondary);\n}\n.isnap-loading-full .isnap-spinner {\n width: 32px;\n height: 32px;\n margin-bottom: var(--isnap-spacing-unit);\n}\n\n/* \n--------------------------------------------\n8. NOTIFICATION / TOAST STYLES\n--------------------------------------------\n*/\n.isnap-notification-container {\n position: fixed;\n top: calc(var(--isnap-spacing-unit) * 2);\n right: calc(var(--isnap-spacing-unit) * 2);\n z-index: 100;\n pointer-events: none;\n}\n.isnap-notification {\n display: flex;\n align-items: center;\n gap: var(--isnap-spacing-unit);\n padding: calc(var(--isnap-spacing-unit) * 1.5) calc(var(--isnap-spacing-unit) * 2);\n background-color: var(--isnap-color-bg-primary);\n border-radius: var(--isnap-border-radius-md);\n box-shadow: var(--isnap-shadow-lg);\n border-left: 4px solid var(--isnap-color-border);\n min-width: 280px;\n max-width: 350px;\n animation: isnap-toast-in 0.4s cubic-bezier(0.21, 1.02, 0.73, 1);\n pointer-events: auto;\n}\n.isnap-notification--success {\n border-left-color: var(--isnap-color-border-success);\n}\n.isnap-notification--error {\n border-left-color: var(--isnap-color-border-error);\n}\n.isnap-notification__icon {\n flex-shrink: 0;\n}\n.isnap-notification--success .isnap-notification__icon {\n color: var(--isnap-color-border-success);\n}\n.isnap-notification--error .isnap-notification__icon {\n color: var(--isnap-color-border-error);\n}\n.isnap-notification__message {\n flex-grow: 1;\n font-size: 0.9rem;\n font-weight: 500;\n color: var(--isnap-color-text-primary);\n}\n.isnap-notification__close {\n background: none;\n border: none;\n cursor: pointer;\n color: var(--isnap-color-text-secondary);\n font-size: 1.25rem;\n padding: 0;\n line-height: 1;\n}\n\n/* \n--------------------------------------------\n9. ANIMATIONS\n--------------------------------------------\n*/\n@keyframes isnap-spin {\n to { transform: rotate(360deg); }\n}\n\n@keyframes isnap-fade-in {\n from { opacity: 0; }\n to { opacity: 1; }\n}\n\n@keyframes isnap-slide-up {\n from { opacity: 0; transform: translateY(20px); }\n to { opacity: 1; transform: translateY(0); }\n}\n\n@keyframes isnap-pulse {\n 0%, 100% { transform: scale(1); opacity: 1; }\n 50% { transform: scale(1.1); opacity: 0.8; }\n}\n\n@keyframes isnap-toast-in {\n from { opacity: 0; transform: translateX(100%); }\n to { opacity: 1; transform: translateX(0); }\n}\n\n/* \n--------------------------------------------\n10. RESPONSIVE DESIGN\n--------------------------------------------\n*/\n@media (min-width: 640px) {\n .isnap-modal-actions {\n flex-direction: row-reverse;\n }\n}\n\n@media (max-width: 768px) {\n .isnap-popup-content {\n max-height: 95vh;\n }\n}\n",l=()=>s().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",width:24,height:24},s().createElement("path",{d:"M4 7h2.586A2 2 0 0 0 8.414 6l.172-.172A2 2 0 0 1 10 5h4a2 2 0 0 1 1.414.586l.172.172A2 2 0 0 0 17.414 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2z"}),s().createElement("circle",{cx:"12",cy:"13",r:"3"})),p=()=>s().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},s().createElement("path",{d:"M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})),d=()=>s().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s().createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),s().createElement("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),s().createElement("polyline",{points:"21 15 16 10 5 21"})),m=()=>s().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s().createElement("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),s().createElement("polyline",{points:"22 4 12 14.01 9 11.01"})),u=()=>s().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s().createElement("circle",{cx:"12",cy:"12",r:"10"}),s().createElement("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),s().createElement("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})),g=({message:n,type:e,onDismiss:a})=>{const i="success"===e?m:u;return s().createElement("div",{className:"isnap-notification-container"},s().createElement("div",{className:`isnap-notification isnap-notification--${e}`},s().createElement("div",{className:"isnap-notification__icon"},s().createElement(i,null)),s().createElement("p",{className:"isnap-notification__message"},n),s().createElement("button",{className:"isnap-notification__close",onClick:a},"×")))},b=()=>s().createElement("div",{className:"isnap-ai-processing-overlay"},s().createElement("div",{className:"isnap-ai-icon"},s().createElement("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s().createElement("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),s().createElement("path",{d:"M12 12v9"}),s().createElement("path",{d:"m8 17 4 4 4-4"}))),s().createElement("div",{className:"isnap-ai-processing-text"},"AI Processing..."),s().createElement("div",{className:"isnap-ai-subtext"},"Analyzing image")),f=()=>s().createElement("span",{className:"isnap-spinner"}),v=({product:n,isActive:e,onClose:a,showNotification:i,fpi:r})=>{const[t,c]=(0,o.useState)(""),[l,d]=(0,o.useState)(""),[m,u]=(0,o.useState)(!1);return s().createElement("div",{className:"isnap-card-drawer "+(e?"isnap-card-drawer--active":"")},s().createElement("div",{className:"isnap-card-drawer__content"},s().createElement("div",{className:"isnap-card-drawer__header"},s().createElement("h3",{className:"isnap-card-drawer__title"},"Add to Cart"),s().createElement("button",{onClick:a,className:"isnap-card-drawer__close-btn"},"×")),n.sizes&&n.sizes.length>0&&s().createElement("fieldset",{className:"isnap-card-drawer__section"},s().createElement("legend",{className:"isnap-label"},"Select Size"),s().createElement("div",{className:"isnap-size-selector"},n.sizes.map(n=>s().createElement("button",{key:n.size,className:"isnap-size-btn "+(t===n.size?"isnap-size-btn--selected":""),onClick:()=>c(n.size)},n.size)))),s().createElement("div",{className:"isnap-card-drawer__section"},s().createElement("label",{htmlFor:"pincode-input",className:"isnap-label"},"Enter Pincode"),s().createElement("input",{id:"pincode-input",type:"text",value:l,onChange:n=>{const e=n.target.value.replace(/\D/g,"");e.length<=6&&d(e)},placeholder:"6-digit pincode",className:"isnap-input"})),s().createElement("button",{className:"isnap-btn isnap-btn-success isnap-btn--full-width",onClick:async()=>{if(t)if(l&&6===l.length)try{u(!0);const e=await r.executeGQL("\nquery locality($locality: LocalityEnum!, $localityValue: String!, $country: String) {\nlocality(locality: $locality, localityValue: $localityValue, country: $country) {\ndisplay_name, id, name, parent_ids, type, localities {\nid, name, display_name, parent_ids, type\n}\n}\n}\n",{locality:"pincode",localityValue:l,country:"IN"});if(!e?.data?.locality&&!e?.locality)return i("Invalid pincode or service unavailable","error"),void u(!1);const o=await r.executeGQL("\nquery ProductPrice($slug: String!, $size: String!, $pincode: String!) {\nproductPrice(slug: $slug, size: $size, pincode: $pincode) {\narticle_id, discount, is_cod, is_gift, item_type, long_lat, pincode, quantity, seller_count, special_badge,\nprice_per_piece { currency_code, currency_symbol, effective, marked, selling },\nseller { count, name, uid },\nstore { uid, name, count }\n}\n}\n",{slug:n.slug,size:t,pincode:l}),s=o?.data?.productPrice||o?.productPrice;if(!s)return i("Product not available for this combination","error"),void u(!1);await(async e=>{try{const o=await r.executeGQL("\nmutation AddItemsToCart($buyNow: Boolean, $areaCode: String!, $addCartRequestInput: AddCartRequestInput) {\naddItemsToCart(buyNow: $buyNow, areaCode: $areaCode, addCartRequestInput: $addCartRequestInput) {\nmessage, partial, success, cart {\nid, is_valid, items {\narticle { identifier, size, seller { name, uid }, price { base { currency_code, currency_symbol, effective, marked } } },\nproduct { name, slug, brand { name } }\n}\n}\n}\n}\n",{buyNow:!1,areaCode:l,addCartRequestInput:{items:[{article_id:e.article_id,item_id:n.uid||parseInt(n.slug.split("-").pop()),item_size:t,quantity:1,seller_id:e.seller.uid,store_id:e.store.uid}]}}),s=o?.data?.addItemsToCart||o?.addItemsToCart;s?.success?(i("Product added to cart successfully!","success"),a()):i(`Failed to add product: ${s?.message||"Unknown error"}`,"error")}catch(n){console.error("Add to cart failed:",n),i(`Failed to add product: ${n.message}`,"error")}finally{u(!1)}})(s)}catch(n){console.error("Serviceability check failed:",n),i(`Serviceability check failed: ${n.message}`,"error"),u(!1)}else i("Please enter a valid 6-digit pincode","error");else i("Please select a size","error")},disabled:m},m?"Adding...":s().createElement(s().Fragment,null,s().createElement(p,null)," Confirm & Add"))))};function y(n){const a=(0,e.useFPI)(),[i,r]=(0,o.useState)([]),[t,m]=(0,o.useState)(!1),[u,y]=(0,o.useState)(null),[h,x]=(0,o.useState)(!1),[w,E]=(0,o.useState)(!1),[_,k]=(0,o.useState)(!1),[N,S]=(0,o.useState)(!1),[C,z]=(0,o.useState)(!1),[I,T]=(0,o.useState)(""),[P,R]=(0,o.useState)(!1),[A,j]=(0,o.useState)(null),[L,O]=(0,o.useState)(null),[$,U]=(0,o.useState)(null),D=(0,o.useRef)(null),G=(0,o.useRef)(null),F=(0,o.useRef)(null),B=(0,o.useRef)(null),M="/ext/int/api/proxy/scan",q=n.title?.value??"",W=(n,e="info",a=3e3)=>{D.current&&clearTimeout(D.current),U({message:n,type:e}),D.current=setTimeout(()=>{U(null)},a)};(0,o.useEffect)(()=>()=>{D.current&&clearTimeout(D.current)},[]),(0,o.useEffect)(()=>{(_||N)&&G.current&&G.current.focus()},[_,N]),(0,o.useEffect)(()=>{const n=h||_||N||C;return document.body.style.overflow=n?"hidden":"",()=>{document.body.style.overflow=""}},[h,_,N,C]),(0,o.useEffect)(()=>{const n=()=>E(window.innerWidth<=768);return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]);const H=n=>`₹${n.toLocaleString()}`,V=n=>{const e=n.target.files?.[0];e&&(async n=>{if(n)if(n.type.startsWith("image/"))try{y(URL.createObjectURL(n)),m(!0),k(!1);const e=new FormData;e.append("image",n),console.log("Uploading image:",n.name);const a=await fetch(`${M}/search-by-image`,{method:"POST",body:e,credentials:"include"});console.log("Response",a);const i=await a.json();console.log(i,"data"),r(i.results||[]),x(!0)}catch(n){console.log(n,"error"),console.error("Error during image upload search:",n),r([]),W("Error processing image. Please try again.","error")}finally{m(!1)}else W("Please select a valid image file","error")})(e)};return s().createElement("div",{className:"isnap-container"},s().createElement("style",null,c),$&&s().createElement(g,{message:$.message,type:$.type,onDismiss:()=>U(null)}),s().createElement("h1",{className:"isnap-title"},q),s().createElement("div",{className:"isnap-upload-section"},s().createElement("button",{onClick:()=>k(!0),className:"isnap-btn isnap-btn-primary isnap-upload-btn",disabled:t},t?s().createElement(s().Fragment,null,s().createElement(f,null)," Analyzing..."):s().createElement(s().Fragment,null,s().createElement(l,null)," Upload or Generate Image")),s().createElement("div",{className:"isnap-upload-caption"},s().createElement("strong",null,"iSnapToShop :"),s().createElement("span",null," Find products by uploading an image or describing what you're looking for."))),_&&s().createElement("div",{className:"isnap-modal-overlay"},s().createElement("div",{className:"isnap-modal-content"},s().createElement("div",{className:"isnap-modal-header"},s().createElement("h2",{className:"isnap-modal-title"},"Find Your Product"),s().createElement("button",{className:"isnap-modal-close-btn",onClick:()=>k(!1)},"×")),s().createElement("div",{className:"isnap-modal-body"},s().createElement("input",{type:"file",ref:B,onChange:V,accept:"image/*",capture:"environment",style:{display:"none"}}),s().createElement("input",{type:"file",ref:F,onChange:V,accept:"image/*",style:{display:"none"}}),s().createElement("div",{className:"isnap-modal-choices"},w&&s().createElement("button",{onClick:()=>B.current?.click(),className:"isnap-choice-btn"},s().createElement(l,null),s().createElement("span",null,"Take Photo")),s().createElement("button",{onClick:()=>F.current?.click(),className:"isnap-choice-btn"},s().createElement(d,null),s().createElement("span",null,w?"Choose from Library":"Upload from Computer"))),s().createElement("div",{className:"isnap-divider"},s().createElement("span",null,"OR")),s().createElement("button",{onClick:()=>{k(!1),S(!0)},className:"isnap-btn isnap-btn-secondary isnap-btn--full-width"},"Generate Image with AI")))),N&&s().createElement("div",{className:"isnap-modal-overlay"},s().createElement("div",{className:"isnap-modal-content"},s().createElement("div",{className:"isnap-modal-header"},s().createElement("h2",{className:"isnap-modal-title"},"Generate Product Image"),s().createElement("button",{className:"isnap-modal-close-btn",onClick:()=>S(!1)},"×")),s().createElement("div",{className:"isnap-modal-body"},s().createElement("label",{htmlFor:"prompt-input",className:"isnap-label"},"Describe your product"),s().createElement("input",{id:"prompt-input",type:"text",ref:G,className:"isnap-input",placeholder:'e.g., "Red floral print summer dress"',value:I,onChange:n=>T(n.target.value),disabled:P}),s().createElement("div",{className:"isnap-modal-actions"},s().createElement("button",{onClick:()=>{S(!1),k(!0)},className:"isnap-btn isnap-btn-secondary isnap-btn--full-width"},"Back to Upload"),s().createElement("button",{onClick:()=>(async n=>{if(n.trim())try{R(!0);const e=await fetch(`${M}/generate-prompts-to-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:n}),credentials:"include"}),a=await e.json();if(!a.success||!a.imageUrl)throw new Error(a.message||"Image generation failed");j(a.imageUrl),z(!0),S(!1)}catch(n){console.error("Error generating image:",n),W("Failed to generate image. Please try again.","error")}finally{R(!1)}else W("Please enter a description for the image","error")})(I),className:"isnap-btn isnap-btn-primary isnap-btn--full-width",disabled:P||!I},P?s().createElement(s().Fragment,null,s().createElement(f,null)," Generating..."):"Generate Image"))))),C&&A&&s().createElement("div",{className:"isnap-modal-overlay"},s().createElement("div",{className:"isnap-modal-content"},s().createElement("div",{className:"isnap-modal-header"},s().createElement("h2",{className:"isnap-modal-title"},"Generated Image Preview"),s().createElement("button",{className:"isnap-modal-close-btn",onClick:()=>z(!1)},"×")),s().createElement("div",{className:"isnap-modal-body isnap-modal-body--centered"},s().createElement("img",{src:A,alt:"Generated from prompt",className:"isnap-image-preview"}),s().createElement("div",{className:"isnap-preview-actions"},s().createElement("button",{onClick:()=>{return n=I,z(!1),S(!0),void T(n);var n},className:"isnap-btn isnap-btn-secondary"},"Regenerate"),s().createElement("button",{onClick:async()=>{if(A)try{m(!0),z(!1),await(async n=>{try{m(!0),k(!1);const e=await fetch(n,{method:"GET",headers:{Accept:"image/*"},mode:"cors"});if(!e.ok)throw new Error(`Failed to fetch image: ${e.status}`);const a=await e.blob(),i=new File([a],"generated-image.png",{type:a.type||"image/png",lastModified:Date.now()}),t=new FormData;t.append("image",i),y(n);const o=await fetch(`${M}/search-by-image`,{method:"POST",body:t,credentials:"include"});if(!o.ok)throw new Error(`Upload failed: ${o.status} ${o.statusText}`);const s=await o.json();r(s.results||[]),x(!0)}catch(n){console.error("Enhanced upload failed:",n),r([]),W(`Error processing image: ${n.message}`,"error")}finally{m(!1)}})(A)}catch(n){console.error("Error processing generated image:",n),W("Error processing image. Please try again.","error")}finally{m(!1)}},className:"isnap-btn isnap-btn-success"},"Use This Image"))))),(h||t)&&s().createElement("button",{className:"isnap-popup-overlay",onClick:n=>(n=>{n.target===n.currentTarget&&(x(!1),y(null),O(null))})(n)},s().createElement("div",{className:"isnap-popup-content"},s().createElement("div",{className:"isnap-popup-header"},s().createElement("h2",{className:"isnap-popup-title"},t?"Searching...":`Search Results (${i.length})`),s().createElement("button",{className:"isnap-popup-close-btn",onClick:()=>{x(!1),y(null),O(null)}},"×")),s().createElement("div",{className:"isnap-popup-body"},u&&s().createElement("div",{className:"isnap-popup-image-section"},s().createElement("h3",{className:"isnap-popup-section-title"},"Your Image"),s().createElement("div",{className:"isnap-popup-selected-image-wrapper"},s().createElement("img",{src:u,alt:"Uploaded for search",className:"isnap-popup-selected-image"}),t&&s().createElement(b,null))),t&&!u&&s().createElement("div",{className:"isnap-loading-full"},s().createElement(f,null),s().createElement("p",null,"Finding perfect matches for you...")),!t&&s().createElement(s().Fragment,null,i.length>0?s().createElement("div",{className:w?"isnap-mobile-products-container":"isnap-grid"},i.map((n,e)=>{const i=n.slug||`prod-${e}`,r=n.sizes?.[0]?.price,t=L===i;let o="";return t&&(w?"isnap-mobile-card--drawer-open":"isnap-card--drawer-open"),s().createElement("div",{key:i,className:`${w?"isnap-mobile-card":"isnap-card"} ${t?w?"isnap-mobile-card--drawer-open":"isnap-card--drawer-open":""}`},s().createElement("div",{className:w?"isnap-mobile-card__inner":"isnap-card__inner"},s().createElement("img",{src:n.image,alt:n.name,className:w?"isnap-mobile-card__image":"isnap-card__image",onError:n=>{n.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZWNlY2VjIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSIjYWFhIj5JbWFnZTwvdGV4dD48L3N2Zz4="}}),s().createElement("div",{className:w?"isnap-mobile-card__content":"isnap-card__content"},s().createElement("h3",{className:w?"isnap-mobile-card__title":"isnap-card__title"},n.name?.length>16?n.name.slice(0,16)+"...":n.name),s().createElement("p",{className:"isnap-card__category"},(c=n.category)?c.replace(/-/g," ").replace(/\b\w/g,n=>n.toUpperCase()):""),r&&s().createElement("div",{className:"isnap-card__price"},H(r.effective.min),r.marked.min>r.effective.min&&s().createElement("span",{className:"isnap-card__price--original"},H(r.marked.min))),s().createElement("div",{className:"isnap-card__actions"},s().createElement("button",{className:"isnap-btn isnap-btn-secondary isnap-btn--small",onClick:()=>(n=>{const e=n.slug||n.id||n.name.toLowerCase().replace(/\s+/g,"-");window.open(`/product/${e}`,"_blank")})(n)},"Details"),s().createElement("button",{className:"isnap-btn isnap-btn-success isnap-btn--small",onClick:()=>(n=>O(e=>e===n?null:n))(i)},s().createElement(p,null)," Add")))),s().createElement(v,{product:n,isActive:t,onClose:()=>O(null),showNotification:W,fpi:a}));var c})):s().createElement("p",{className:"isnap-no-results-text"},"No matching products found."))))))}y.propTypes={title:i().shape({value:i().string})},y.defaultProps={title:{value:""}},v.propTypes={product:i().object.isRequired,isActive:i().bool.isRequired,onClose:i().func.isRequired,showNotification:i().func.isRequired,fpi:i().object.isRequired},g.propTypes={message:i().string.isRequired,type:i().string.isRequired,onDismiss:i().func.isRequired},y.serverFetch=async({fpi:n})=>({});const h={label:"iSnapToShop",name:"product-list",props:[{id:"title",label:"Page Title",type:"text",default:""}],blocks:[]},x={"product-list":{...n}}})(),t})());