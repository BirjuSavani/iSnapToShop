!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define("extension",["React"],t):"object"==typeof exports?exports.extension=t(require("React")):e.extension=t(e.React)}("undefined"!=typeof self?self:this,(e=>(()=>{"use strict";var t={883:t=>{t.exports=e}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};o.r(i),o.d(i,{default:()=>p});var a={};o.r(a),o.d(a,{Component:()=>c,settings:()=>d});var r=o(883),l=o.n(r);const s={container:{padding:"20px",maxWidth:"1200px",margin:"0 auto",fontFamily:"Arial, sans-serif"},title:{textAlign:"center",color:"#333",marginBottom:"30px",fontSize:"2rem",fontWeight:"bold"},uploadSection:{textAlign:"center",marginBottom:"30px"},uploadButton:{backgroundColor:"#3949ab",color:"#fff",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"10px",fontWeight:"bold",border:"none",fontSize:"16px",margin:"0 10px 10px 10px"},mobileButtonContainer:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},desktopButtonContainer:{display:"flex",justifyContent:"center",alignItems:"center"},hiddenInput:{display:"none"},selectedImageContainer:{textAlign:"center",marginBottom:"20px"},selectedImage:{maxWidth:"300px",borderRadius:"10px",border:"1px solid #ccc"},loadingText:{textAlign:"center",fontSize:"18px",color:"#666"},showResultsButton:{backgroundColor:"#4caf50",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",display:"block",margin:"20px auto"},resultsFoundText:{textAlign:"center",fontSize:"18px",color:"#333",marginTop:"20px",fontWeight:"bold"},popupOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},popupContent:{backgroundColor:"white",borderRadius:"12px",maxWidth:"1000px",maxHeight:"90vh",overflow:"auto",position:"relative",width:"100%"},popupHeader:{padding:"20px",borderBottom:"1px solid #eee",position:"sticky",top:0,backgroundColor:"white",zIndex:1001,display:"flex",justifyContent:"space-between",alignItems:"center"},popupTitle:{fontSize:"24px",fontWeight:"bold",margin:"0",color:"#333"},closeButton:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666",padding:"0",width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"},popupBody:{padding:"20px"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"20px",padding:"0"},card:{border:"1px solid #ddd",borderRadius:"12px",padding:"16px",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s, box-shadow 0.2s"},cardHover:{transform:"translateY(-2px)",boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},cardImage:{width:"100%",height:"180px",objectFit:"cover",borderRadius:"8px",marginBottom:"12px"},cardTitle:{fontSize:"16px",fontWeight:"bold",margin:"0 0 8px 0",color:"#333",lineHeight:"1.4"},cardPrice:{fontSize:"18px",fontWeight:"bold",color:"#e53e3e",margin:"8px 0"},cardOriginalPrice:{fontSize:"14px",color:"#999",textDecoration:"line-through",marginLeft:"8px"},cardCategory:{fontSize:"12px",color:"#666",textTransform:"capitalize",marginBottom:"8px"},viewDetailsButton:{backgroundColor:"#3949ab",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",width:"100%",marginTop:"12px"},noProductsText:{textAlign:"center",fontSize:"18px",color:"#666",marginTop:"40px"},cameraIcon:{width:"20px",height:"20px",fill:"currentColor"},selectedImageWrapper:{position:"relative",display:"inline-block",marginBottom:"20px"},aiProcessingOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(57, 73, 171, 0.7)",borderRadius:"10px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"white"},aiIcon:{fontSize:"48px",marginBottom:"15px",animation:"pulse 1.5s infinite"},aiProcessingText:{fontSize:"20px",fontWeight:"bold",marginBottom:"5px"},aiSubtext:{fontSize:"14px",opacity:.8},dotsAnimation:{display:"inline-block",width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"white",margin:"0 3px",animation:"bounce 1.4s infinite ease-in-out"},dotsAnimation1:{animationDelay:"0s"},dotsAnimation2:{animationDelay:"0.2s"},dotsAnimation3:{animationDelay:"0.4s"},"@keyframes pulse":{"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.1)",opacity:.8},"100%":{transform:"scale(1)",opacity:1}},"@keyframes bounce":{"0%, 80%, 100%":{transform:"translateY(0)"},"40%":{transform:"translateY(-10px)"}}};function c({props:e}){const t="9095",[n,o]=(0,r.useState)([]),[i,a]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[g,u]=(0,r.useState)(!1),x=e?.title?.value??"Snap & Shop - Find Products by Image";(0,r.useEffect)((()=>{const e=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768;u(e)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const f=async e=>{const n=e.target.files[0];if(!n)return;d(URL.createObjectURL(n)),a(!0);const i=new FormData;i.append("image",n),i.append("company_id",t);try{const e=await fetch(`/ext/ab/api/proxy/scan/search-by-image?application_id=672ddc7346bed2c768faf043&company_id=${t}`,{method:"POST",body:i,credentials:"include"}),n=await e.json();o(n.results||[]),n.results&&n.results.length>0&&m(!0)}catch(e){console.error("Error during image upload search:",e),o([])}a(!1)},y=()=>{m(!1)},b=e=>`₹${e.toLocaleString()}`,h=()=>l().createElement("svg",{style:s.cameraIcon,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},l().createElement("path",{d:"M149.1 64.8L138.7 96H64C28.7 96 0 124.7 0 160V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H373.3L362.9 64.8C356.4 45.2 338.1 32 317.4 32H194.6c-20.7 0-39 13.2-45.5 32.8zM256 192a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"})),v=()=>l().createElement("div",{style:s.aiProcessingOverlay},l().createElement("div",{style:{...s.aiIcon}},l().createElement("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l().createElement("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),l().createElement("path",{d:"M12 12v9"}),l().createElement("path",{d:"m8 17 4 4 4-4"}))),l().createElement("div",{style:s.aiProcessingText},"AI Processing"),l().createElement("div",{style:s.aiSubtext},"Analyzing image patterns"),l().createElement("div",{style:{marginTop:"15px",display:"flex"}},l().createElement("div",{style:{...s.dotsAnimation,...s.dotsAnimation1}}),l().createElement("div",{style:{...s.dotsAnimation,...s.dotsAnimation2}}),l().createElement("div",{style:{...s.dotsAnimation,...s.dotsAnimation3}})));return l().createElement("div",{style:s.container},l().createElement("div",null,l().createElement("title",null,x)),l().createElement("h1",{style:s.title},x),l().createElement("div",{style:s.uploadSection},g?l().createElement("div",{style:s.mobileButtonContainer},l().createElement("label",{htmlFor:"imageCaptureUpload"},l().createElement(h,null)),l().createElement("input",{id:"imageCaptureUpload",type:"file",accept:"image/*",capture:"environment",style:s.hiddenInput,onChange:e=>f(e)}),l().createElement("label",{htmlFor:"imageFileUpload"},l().createElement(h,null)),l().createElement("input",{id:"imageFileUpload",type:"file",accept:"image/*",style:s.hiddenInput,onChange:e=>f(e)})):l().createElement("div",{style:s.desktopButtonContainer},l().createElement("label",{htmlFor:"imageUpload"},l().createElement(h,null)),l().createElement("input",{id:"imageUpload",type:"file",accept:"image/*",style:s.hiddenInput,onChange:f}))),c&&l().createElement("div",{style:s.selectedImageContainer},l().createElement("div",{style:s.selectedImageWrapper},l().createElement("img",{src:c,alt:"Selected",style:s.selectedImage}),i&&l().createElement(v,null))),i?l().createElement(l().Fragment,null):l().createElement("div",null,0===n.length&&c&&l().createElement("p",{style:s.noProductsText},"No matching products found.")),p&&l().createElement("div",{style:s.popupOverlay,onClick:y},l().createElement("div",{style:s.popupContent,onClick:e=>e.stopPropagation()},l().createElement("div",{style:s.popupHeader},l().createElement("h2",{style:s.popupTitle},"Search Results (",n.length," products)"),l().createElement("button",{style:s.closeButton,onClick:y},"×")),l().createElement("div",{style:s.popupBody},n.length>0?l().createElement("div",{style:s.grid},n.map(((e,t)=>{return l().createElement("div",{key:t,style:s.card},l().createElement("img",{src:e.image,alt:e.name,style:s.cardImage,onError:e=>{e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSIjOTk5Ij5ObyBJbWFnZTwvdGV4dD48L3N2Zz4="}}),l().createElement("h3",{style:s.cardTitle},e.name),e.category&&l().createElement("p",{style:s.cardCategory},(n=e.category)?n.replace(/-/g," ").replace(/\b\w/g,(e=>e.toUpperCase())):""),e.sizes&&e.sizes.length>0&&l().createElement("div",{style:s.cardPrice},b(e.sizes[0].price.effective.min),e.sizes[0].price.marked.min>e.sizes[0].price.effective.min&&l().createElement("span",{style:s.cardOriginalPrice},b(e.sizes[0].price.marked.min))),l().createElement("button",{style:s.viewDetailsButton,onClick:()=>(e=>{const t=e.slug||e.id||e.name.toLowerCase().replace(/\s+/g,"-");window.location.href=`/product/${t}`})(e)},"View Details"));var n}))):l().createElement("p",{style:s.noProductsText},"No products found.")))))}c.serverFetch=async({fpi:e})=>({});const d={label:"Product List",name:"product-list",props:[{id:"title",label:"Page Title",type:"text",default:"",info:"Page Title"}],blocks:[]},p={"product-list":{...a}};return i})()));