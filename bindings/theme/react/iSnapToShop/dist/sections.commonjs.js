(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>s});var o={};e.r(o),e.d(o,{Component:()=>a,settings:()=>l});const n=require("fs");var i=e.n(n);const r={container:{padding:"20px",maxWidth:"1200px",margin:"0 auto",fontFamily:"Arial, sans-serif"},title:{textAlign:"center",color:"#333",marginBottom:"30px",fontSize:"2rem",fontWeight:"bold"},uploadSection:{textAlign:"center",marginBottom:"30px"},uploadButton:{backgroundColor:"#3949ab",color:"#fff",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"10px",fontWeight:"bold",border:"none",fontSize:"16px",margin:"0 10px 10px 10px"},mobileButtonContainer:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},desktopButtonContainer:{display:"flex",justifyContent:"center",alignItems:"center"},hiddenInput:{display:"none"},selectedImageContainer:{textAlign:"center",marginBottom:"20px"},selectedImage:{maxWidth:"300px",borderRadius:"10px",border:"1px solid #ccc"},loadingText:{textAlign:"center",fontSize:"18px",color:"#666"},showResultsButton:{backgroundColor:"#4caf50",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",display:"block",margin:"20px auto"},resultsFoundText:{textAlign:"center",fontSize:"18px",color:"#333",marginTop:"20px",fontWeight:"bold"},mobileModalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"flex-end",zIndex:2e3},mobileModalContent:{backgroundColor:"white",width:"100%",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",padding:"20px",maxHeight:"50vh",animation:"slideUp 0.3s ease-out"},mobileModalTitle:{fontSize:"18px",fontWeight:"bold",textAlign:"center",marginBottom:"20px",color:"#333"},mobileChoiceButton:{width:"100%",padding:"15px",backgroundColor:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:"10px",marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"15px",fontSize:"16px",cursor:"pointer",transition:"all 0.2s ease"},mobileChoiceButtonHover:{backgroundColor:"#e9ecef",transform:"translateY(-1px)"},mobileChoiceIcon:{width:"24px",height:"24px",fill:"#3949ab"},mobileChoiceText:{color:"#333",fontWeight:"500"},mobileModalCancel:{width:"100%",padding:"15px",backgroundColor:"transparent",border:"none",borderRadius:"10px",marginTop:"10px",fontSize:"16px",color:"#666",cursor:"pointer",fontWeight:"500"},mobileUploadMainButton:{backgroundColor:"#3949ab",color:"#fff",padding:"15px 30px",borderRadius:"12px",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"10px",fontWeight:"bold",border:"none",fontSize:"18px",width:"100%",maxWidth:"300px"},popupOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)"},popupContent:{background:"linear-gradient(135deg, #ffffff, #f9f9f9)",borderRadius:"16px",maxWidth:"1000px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 15px 30px rgba(0, 0, 0, 0.2)",animation:"fadeIn 0.4s ease-in-out",marginTop:"12px"},popupHeader:{padding:"20px",borderBottom:"1px solid #ddd",backgroundColor:"#ffffffcc",backdropFilter:"blur(4px)",position:"sticky",top:0,zIndex:1,display:"flex",justifyContent:"space-between",alignItems:"center"},popupTitle:{fontSize:"1.75rem",fontWeight:"700",color:"#2c3e50",margin:0},closeButton:{background:"#f1f1f1",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"background 0.2s ease","&:hover":{background:"#ddd"}},popupBody:{padding:"20px",display:"flex",flexDirection:"column",gap:"20px"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"24px"},card:{border:"none",borderRadius:"14px",background:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",overflow:"hidden",transition:"transform 0.3s ease, box-shadow 0.3s ease"},cardHover:{transform:"translateY(-5px)",boxShadow:"0 8px 20px rgba(0,0,0,0.15)"},cardImage:{width:"100%",height:"200px",objectFit:"cover"},cardTitle:{fontSize:"1rem",fontWeight:"600",padding:"10px 16px 0 16px",color:"#2d3436"},cardPrice:{fontSize:"1.1rem",fontWeight:"bold",color:"#d63031",padding:"0 16px"},cardOriginalPrice:{fontSize:"0.9rem",color:"#b2bec3",textDecoration:"line-through",marginLeft:"6px"},cardCategory:{fontSize:"0.85rem",color:"#636e72",textTransform:"capitalize",padding:"0 16px 10px 16px"},viewDetailsButton:{margin:"0 16px 16px 16px",padding:"10px",backgroundColor:"#F0801A",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"14px",transition:"background 0.2s ease","&:hover":{backgroundColor:"#000027"}},mobileCard:{display:"flex",flexDirection:"row",alignItems:"flex-start",padding:"15px",borderBottom:"1px solid #eee",width:"100%"},mobileCardImage:{width:"120px",height:"120px",objectFit:"cover",borderRadius:"8px",marginRight:"15px"},mobileCardContent:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-start"},mobileCardTitle:{fontSize:"14px",fontWeight:"600",color:"#2d3436",marginBottom:"4px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},mobileCardPrice:{fontSize:"14px",fontWeight:"bold",color:"#d63031",marginBottom:"8px"},mobileCardOriginalPrice:{fontSize:"12px",color:"#b2bec3",textDecoration:"line-through",marginLeft:"6px"},mobileViewDetailsButton:{padding:"8px 12px",backgroundColor:"#F0801A",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"12px",alignSelf:"flex-start",transition:"background 0.2s ease","&:hover":{backgroundColor:"#000027"}},mobileProductsContainer:{width:"100%"},"@keyframes fadeIn":{"0%":{opacity:0,transform:"scale(0.95)"},"100%":{opacity:1,transform:"scale(1)"}},noProductsText:{textAlign:"center",fontSize:"18px",color:"#666",marginTop:"40px"},cameraIcon:{width:"20px",height:"20px",fill:"currentColor"},selectedImageWrapper:{position:"relative",display:"inline-block",marginBottom:"20px"},aiProcessingOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(57, 73, 171, 0.7)",borderRadius:"10px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"white"},aiIcon:{fontSize:"48px",marginBottom:"15px",animation:"pulse 1.5s infinite"},aiProcessingText:{fontSize:"20px",fontWeight:"bold",marginBottom:"5px"},aiSubtext:{fontSize:"14px",opacity:.8},dotsAnimation:{display:"inline-block",width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"white",margin:"0 3px",animation:"bounce 1.4s infinite ease-in-out"},dotsAnimation1:{animationDelay:"0s"},dotsAnimation2:{animationDelay:"0.2s"},dotsAnimation3:{animationDelay:"0.4s"},"@keyframes pulse":{"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.1)",opacity:.8},"100%":{transform:"scale(1)",opacity:1}},"@keyframes bounce":{"0%, 80%, 100%":{transform:"translateY(0)"},"40%":{transform:"translateY(-10px)"}},"@keyframes slideUp":{"0%":{transform:"translateY(100%)"},"100%":{transform:"translateY(0)"}}};function a({props:e}){const[t,o]=(0,n.useState)([]),[a,l]=(0,n.useState)(!1),[s,c]=(0,n.useState)(null),[d,p]=(0,n.useState)(!1),[m,g]=(0,n.useState)(!1),[u,x]=(0,n.useState)(!1),f=e?.title?.value??"Snap & Shop - Find Products by Image";(0,n.useEffect)((()=>(document.body.style.overflow=d?"hidden":"",()=>{document.body.style.overflow=""})),[d]),(0,n.useEffect)((()=>{const e=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768;g(e)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const b=async(e,t=!1)=>{const n=e.target.files&&e.target.files[0];if(n)if(n.type.startsWith("image/"))try{c(URL.createObjectURL(n)),l(!0);const e=new FormData;e.append("image",n);const t=await fetch("/ext/ab/api/proxy/scan/search-by-image",{method:"POST",body:e,credentials:"include"}),i=await t.json();o(i.results||[]),i.results&&i.results.length>0&&p(!0)}catch(e){console.error("Error during image upload search:",e),o([]),alert("Error processing image. Please try again.")}finally{l(!1)}else alert("Please select a valid image file")},y=e=>{const t=`/product/${e.slug||e.id||e.name.toLowerCase().replace(/\s+/g,"-")}`;window.open(t,"_blank")},h=()=>{p(!1),c(null)},C=e=>`â‚¹${e.toLocaleString()}`,v=e=>e?e.replace(/-/g," ").replace(/\b\w/g,(e=>e.toUpperCase())):"",k=e=>{x(!1),setTimeout((()=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.multiple=!1,"camera"===e&&(t.capture="environment"),t.addEventListener("change",(o=>{o.target.files&&o.target.files[0]&&b(o,"camera"===e),t.remove()})),t.addEventListener("cancel",(()=>{t.remove()})),document.body.appendChild(t),t.style.display="none",t.click()}),100)},E=()=>{x(!1)},I=()=>i().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"black",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",width:24,height:24},i().createElement("path",{d:"M4 7h2.586A2 2 0 0 0 8.414 6l.172-.172A2 2 0 0 1 10 5h4a2 2 0 0 1 1.414.586l.172.172A2 2 0 0 0 17.414 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2z"}),i().createElement("circle",{cx:"12",cy:"13",r:"3"})),w=()=>i().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"black",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",width:24,height:24},i().createElement("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"}),i().createElement("polyline",{points:"12 12 12 3 8 7"}),i().createElement("line",{x1:"12",y1:"3",x2:"16",y2:"7"})),S=()=>i().createElement("div",{style:r.aiProcessingOverlay},i().createElement("div",{style:{...r.aiIcon}},i().createElement("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},i().createElement("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),i().createElement("path",{d:"M12 12v9"}),i().createElement("path",{d:"m8 17 4 4 4-4"}))),i().createElement("div",{style:r.aiProcessingText},"AI Processing"),i().createElement("div",{style:r.aiSubtext},"Analyzing image patterns"),i().createElement("div",{style:{marginTop:"15px",display:"flex"}},i().createElement("div",{style:{...r.dotsAnimation,...r.dotsAnimation1}}),i().createElement("div",{style:{...r.dotsAnimation,...r.dotsAnimation2}}),i().createElement("div",{style:{...r.dotsAnimation,...r.dotsAnimation3}})));return i().createElement("div",{style:r.container},i().createElement("div",null,i().createElement("title",null,f)),i().createElement("h1",{style:r.title},f),i().createElement("div",{style:r.uploadSection},m?i().createElement("div",{style:r.mobileButtonContainer},i().createElement("button",{onClick:()=>{x(!0)}},i().createElement(I,null))):i().createElement("div",{style:r.desktopButtonContainer},i().createElement("label",{htmlFor:"imageUpload"},i().createElement(I,null)),i().createElement("input",{id:"imageUpload",type:"file",accept:"image/*",style:r.hiddenInput,onChange:b}))),s&&i().createElement("div",{style:r.selectedImageContainer},i().createElement("div",{style:r.selectedImageWrapper},i().createElement("img",{src:s,alt:"Selected",style:r.selectedImage}),a&&i().createElement(S,null))),a?i().createElement(i().Fragment,null):i().createElement("div",null,0===t.length&&s&&i().createElement("p",{style:r.noProductsText},"No matching products found.")),u&&i().createElement("div",{style:r.mobileModalOverlay,onClick:E},i().createElement("div",{style:r.mobileModalContent,onClick:e=>e.stopPropagation()},i().createElement("h3",{style:r.mobileModalTitle},"Choose Image Source"),i().createElement("button",{style:r.mobileChoiceButton,onClick:()=>k("camera"),onMouseEnter:e=>{e.target.style.backgroundColor=r.mobileChoiceButtonHover.backgroundColor,e.target.style.transform=r.mobileChoiceButtonHover.transform},onMouseLeave:e=>{e.target.style.backgroundColor=r.mobileChoiceButton.backgroundColor,e.target.style.transform="none"}},i().createElement(I,null),i().createElement("span",{style:r.mobileChoiceText},"Take Photo")),i().createElement("button",{style:r.mobileChoiceButton,onClick:()=>k("gallery"),onMouseEnter:e=>{e.target.style.backgroundColor=r.mobileChoiceButtonHover.backgroundColor,e.target.style.transform=r.mobileChoiceButtonHover.transform},onMouseLeave:e=>{e.target.style.backgroundColor=r.mobileChoiceButton.backgroundColor,e.target.style.transform="none"}},i().createElement(w,null),i().createElement("span",{style:r.mobileChoiceText},"Choose from Gallery")),i().createElement("button",{style:r.mobileModalCancel,onClick:E},"Cancel"))),d&&i().createElement("div",{style:r.popupOverlay,onClick:h},i().createElement("div",{style:r.popupContent,onClick:e=>e.stopPropagation()},i().createElement("div",{style:r.popupHeader},i().createElement("h2",{style:r.popupTitle},"Search Results (",t.length," products)"),i().createElement("button",{style:r.closeButton,onClick:h},"Ã—")),i().createElement("div",{style:r.popupBody},t.length>0?m?i().createElement("div",{style:r.mobileProductsContainer},t.map(((e,t)=>i().createElement("div",{key:t,style:r.mobileCard},i().createElement("img",{src:e.image,alt:e.name,style:r.mobileCardImage,onError:e=>{e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSIjOTk5Ij5ObyBJbWFnZTwvdGV4dD48L3N2Zz4="}}),i().createElement("div",{style:r.mobileCardContent},i().createElement("h3",{style:r.mobileCardTitle},e.name),e.category&&i().createElement("p",{style:r.cardCategory},v(e.category)),e.sizes&&e.sizes.length>0&&i().createElement("div",{style:r.mobileCardPrice},C(e.sizes[0].price.effective.min),e.sizes[0].price.marked.min>e.sizes[0].price.effective.min&&i().createElement("span",{style:r.mobileCardOriginalPrice},C(e.sizes[0].price.marked.min))),i().createElement("button",{style:r.mobileViewDetailsButton,onClick:()=>y(e)},"View Details")))))):i().createElement("div",{style:r.grid},t.map(((e,t)=>i().createElement("div",{key:t,style:r.card},i().createElement("img",{src:e.image,alt:e.name,style:r.cardImage,onError:e=>{e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSIjOTk5Ij5ObyBJbWFnZTwvdGV4dD48L3N2Zz4="}}),i().createElement("h3",{style:r.cardTitle},e.name.length>27?e.name.slice(0,27)+"...":e.name),e.category&&i().createElement("p",{style:r.cardCategory},v(e.category)),e.sizes&&e.sizes.length>0&&i().createElement("div",{style:r.cardPrice},C(e.sizes[0].price.effective.min),e.sizes[0].price.marked.min>e.sizes[0].price.effective.min&&i().createElement("span",{style:r.cardOriginalPrice},C(e.sizes[0].price.marked.min))),i().createElement("button",{style:r.viewDetailsButton,onClick:()=>y(e)},"View Details"))))):i().createElement("p",{style:r.noProductsText},"No products found.")))))}a.serverFetch=async({fpi:e})=>({});const l={label:"iSnapToShop",name:"product-list",props:[{id:"title",label:"Page Title",type:"text",default:"",info:"Page Title"}],blocks:[]},s={"product-list":{...o}};exports.sections=t})();